# Cloudflare Worker configuration
# Used for deploying the backend Worker to Cloudflare

name = "gracenook"
type = "javascript"
workers_dev = true
compatibility_date = "2025-11-22"
main = "src/worker.js"

# Development environment: local dev Worker
[env.development]
name = "gracenook-dev"
workers_dev = true

[[env.development.d1_databases]]
binding = "DB"
database_name = "gracenook_db"
database_id = "654c0b9e-fb63-4ef9-aaa9-39758baf87de"

[env.development.vars]
API_URL = "http://localhost:8788"

# Production environment: Worker + D1
[env.production]
name = "gracenook"
workers_dev = true

# D1 database binding (production only)
[[env.production.d1_databases]]
binding = "DB"
database_name = "gracenook_db"
database_id = "654c0b9e-fb63-4ef9-aaa9-39758baf87de"

# Production environment variables
# JWT_SECRET is managed via `wrangler secret put` (not in config)
[env.production.vars]
API_URL = "https://gracenook.thebiggydg2019.workers.dev"
